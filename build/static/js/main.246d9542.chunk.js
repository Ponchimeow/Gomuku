(this.webpackJsonpgomoku=this.webpackJsonpgomoku||[]).push([[0],{10:function(e,t,n){e.exports=n(16)},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(2),o=n.n(i),c=(n(15),n(9)),s=n(1),l=n(3),h=n(4),u=n(6),f=n(5),d=n(7),v=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.draw()}},{key:"draw",value:function(){var e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S"],n=o.a.findDOMNode(this).getContext("2d");n.font="bold 14px Arial",n.textAlign="left";for(var a=0;a<19;a++)n.fillText(e[a],25+30*a,20),n.fillText(e[a],25+30*a,590);for(var r=0;r<19;r++)n.fillText(t[r],10,35+30*r),n.fillText(t[r],580,35+30*r);n.beginPath();for(var i=30;i<600;i+=30)n.moveTo(i,30),n.lineTo(i,570),n.stroke();for(var c=30;c<600;c+=30)n.moveTo(30,c),n.lineTo(570,c),n.stroke();for(var s=4;s<=16;s+=6)for(var l=4;l<=16;l+=6)n.beginPath(),n.arc(30*s,30*l,5,0,2*Math.PI),n.fillStyle="black",n.fill()}},{key:"render",value:function(){return r.a.createElement("canvas",{id:"board",height:"600",width:"600"})}}]),t}(r.a.Component),m=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(f.a)(t).call(this,e))).state={chessLogs:[],winner:""},n.chessCanvas=r.a.createRef(),n.checkChess=n.checkChess.bind(Object(s.a)(n)),n.checkWin=n.checkWin.bind(Object(s.a)(n)),n.handleMove=n.handleMove.bind(Object(s.a)(n)),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.state.chessLogs,t=o.a.findDOMNode(this.refs.chessCanvas).getContext("2d");t.clearRect(0,0,600,600);e.map((function(e,n){t.beginPath(),t.arc(30*e.x,30*e.y,12,0,2*Math.PI);var a=t.createRadialGradient(30*e.x,30*e.y,13,30*e.x,30*e.y,0);n%2===0?(a.addColorStop(0,"#0A0A0A"),a.addColorStop(1,"#636766")):(a.addColorStop(0,"#D1D1D1"),a.addColorStop(1,"#F9F9F9")),t.fillStyle=a,t.fill()}))}},{key:"checkChess",value:function(e){var t=this.state,n=t.chessLogs;if(""===t.winner)if(""===this.checkWin(n)){var a=e.nativeEvent.offsetX,r=e.nativeEvent.offsetY;if(!(a<20||a>580||r<20||r>580)){var i=Math.round(a/30),o=Math.round(r/30);if(!n.find((function(e){return e.x===i&&e.y===o}))){var s=[].concat(Object(c.a)(n),[{x:i,y:o}]);this.setState({chessLogs:s})}}}else this.setState({winner:this.checkWin(n)})}},{key:"checkWin",value:function(e){if(e.length<8)return"";var t=Array(19).fill(null).map((function(){return Array(19).fill(null)}));e.map((function(e,n){t[e.x-1][e.y-1]=n%2===0?"B":"W"}));var n=e.length%2===0?"White":"Black",a=e[e.length-1].x,r=e[e.length-1].y,i=1,o=a,c=r;function s(){return!(i<5)||(i=1,o=a,c=r,!1)}if(o<19&&o>1&&c<19&&c>1){for(;t[o-1][c-1]===t[o][c-1];)i++,o++;for(o=a;t[o-1][c-1]===t[o-2][c-1];)i++,o--;if(s())return n;for(;t[o-1][c-1]===t[o-1][c];)i++,c++;for(c=r;t[o-1][c-1]===t[o-1][c-2];)i++,c--;if(s())return n;for(;t[o-1][c-1]===t[o][c];)i++,o++,c++;for(o=a,c=r;t[o-1][c-1]===t[o-2][c-2];)i++,o--,c--;if(s())return n;for(;t[o-1][c-1]===t[o-2][c];)i++,o--,c++;for(o=a,c=r;t[o-1][c-1]===t[o][c-2];)i++,o++,c--;if(s())return n}return""}},{key:"handleMove",value:function(e){var t=this.state,n=t.chessLogs;""!==t.winner?this.setState({chessLogs:n.filter((function(t,n){return n<e})),winner:""}):this.setState({chessLogs:n.filter((function(t,n){return n<e}))})}},{key:"render",value:function(){var e=this,t=this.state.chessLogs,n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S"],a=this.checkWin(t);return r.a.createElement("div",null,r.a.createElement("canvas",{ref:"chessCanvas",id:"chess",height:"600",width:"600",onClick:this.checkChess}),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"button-group"},r.a.createElement("div",{className:"button-group__info"},""!==a?"Winner: ".concat(a):"Next: ".concat(t.length%2===0?"Black":"White")),r.a.createElement("div",{className:"history"},r.a.createElement("div",{className:"history-btn restart",onClick:function(){return e.handleMove(0)}},"#0 Start"),t.map((function(t,a){return r.a.createElement("div",{className:"history-btn",key:a+1,onClick:function(){return e.handleMove(a+1)}},"#",a+1,"  ",t.x,", ",n[t.y-1])})))),r.a.createElement("div",{className:"tip"},"\u9ede\u9078\u9000\u56de\u6b65\u6578")))}}]),t}(a.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(v,null),r.a.createElement(m,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.246d9542.chunk.js.map